(()=>{"use strict";document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(e){const t=e.target.closest("#load-more");if(!t)return;if(e.preventDefault(),t.disabled)return;let n=parseInt(t.dataset.page||2,10);t.disabled=!0,t.textContent=window.integlightLoadMore.loadingText,fetch(window.integlightLoadMore.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"integlight_load_more_posts",page:n,nonce:window.integlightLoadMore.nonce})}).then(e=>e.json()).then(e=>{if(e&&e.success){const o=document.querySelector("#latest-posts-grid");o&&o.insertAdjacentHTML("beforeend",e.data),t.dataset.page=n+1,t.disabled=!1,t.textContent=window.integlightLoadMore.loadMoreText}else t.remove()}).catch(()=>{t.disabled=!1,t.textContent=window.integlightLoadMore.loadMoreText})}),document.addEventListener("click",function(e){const t=e.target.closest(".load-more-cat");if(!t)return;if(e.preventDefault(),t.disabled)return;let n=parseInt(t.dataset.page||2,10),o=parseInt(t.dataset.cat||0,10);o&&(t.disabled=!0,t.textContent=window.integlightLoadMore.loadingText,fetch(window.integlightLoadMore.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"integlight_load_more_category_posts",page:n,cat:o,nonce:window.integlightLoadMore.nonce})}).then(e=>e.json()).then(e=>{if(e&&e.success){const o=t.closest(".category-posts");let a=o?o.querySelector(".post-grid"):null;if(a)a.insertAdjacentHTML("beforeend",e.data);else{const n=t.previousElementSibling;n&&n.classList.contains("post-grid")&&n.insertAdjacentHTML("beforeend",e.data)}t.dataset.page=n+1,t.disabled=!1,t.textContent=window.integlightLoadMore.loadMoreText}else t.remove()}).catch(()=>{t.disabled=!1,t.textContent=window.integlightLoadMore.loadMoreText}))})})})();